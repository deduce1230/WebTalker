<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>かんたん筆談</title>
<meta name="viewport" content="width=device-width">
<meta name="keywords" content="">
<meta name="description" content="">
<link rel="stylesheet" type="text/css" href="css/style.css">
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/jquery.smoothscroll.js"></script>
<script type="text/javascript" src="js/jquery.scrollshow.js"></script>
<script type="text/javascript" src="js/script.js"></script>
<script>
$(function($){
	$('html').smoothscroll({easing : 'swing', speed : 1000, margintop : 30, headerfix : $('nav')});
	$('.totop').scrollshow({position : 500});
});
</script>
</head>
<body>


<header>
<h1>まねっこおしゃべり</h1>
</header>

<nav>
<ul>
	<li><a href="index.html">メイン画面</a></li>
	<li><a href="usage.html">使い方</a></li>
</ul>
</nav>

<div id="contents">
	<h6 id="sample">聞き取り中の時におしゃべりしてみてください
      <p>
      <label>
          <input type="checkbox" name = "mic" checked>
          <span>開始します</span>
          <span>聞き取り中</span>
      </label>
      </p>
    </h6>
    <textarea id="txt" class="speeched_area" rows="5" readonly></textarea>

    <!-- カメラ映像が描画されます。 -->
    <video id="video_area" style="background-color: #000" autoplay></video>

<script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
<!-- 押下するとカメラ映像描画を開始します。 -->
<button id="start_btn">映像表示開始</button>


</div><!-- /.contents -->

<footer>
	<div><small>distributed by N.Yamashita  ver. 1.100</small></div><!-- /.copyright -->
</footer>

<div class="totop"><a href="#"><img src="images/totop.png" alt="ページのトップへ戻る"></a></div><!-- /.totop -->

<script type="text/javascript" src="js/speech_api.js"></script>

</body>
	
<script>

    // getUserMedia が使えないときは、『getUserMedia()が使えないブラウザだよ』と言ってね。
    if (typeof navigator.mediaDevices.getUserMedia !== 'function') {
        const err = new Error('getUserMedia()が使えないブラウザだよ');
        alert(`${err.name} ${err.message}`);
        throw err;
    }

    // 操作する画面エレメント変数定義します。
    const $start = document.getElementById('start_btn');   // スタートボタン
    const $video = document.getElementById('video_area');  // 映像表示エリア

    // 「スタートボタン」を押下で、getUserMedia を使って映像を「映像表示エリア」に表示するよ。
    $start.addEventListener('click', () => {
        navigator.mediaDevices.getUserMedia({ video: true, audio: false })
        .then(stream => $video.srcObject = stream)
        .catch(err => alert(`${err.name} ${err.message}`));
    }, false);

</script>

</html>
